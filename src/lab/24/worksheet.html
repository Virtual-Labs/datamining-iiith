

<center>
<img src="http://virtual-labs.ac.in/images/virtualLabsLogo.jpg" width="1220" alt="logo"/> 
</center>

<!--h1 id="main-title">
Entity Relationship Model 
</h1-->
<div id="introduction">
<h2>Introduction </h2>

<p>When we build a software application, we need to first design the way its data will be organized and stored. To do this, we need to understand the available ways in which our database system can organize data. We also need to understand how data is structured in the real-world &ndash; what are the entities that our software application deals with and how are they related to each other.</p>

<p>Entity Relationship (ER) modeling is a set of techniques and conventions to describe the organization of data and how it relates to real-world entities. Diagrams created by this process are called entity-relationship diagrams or ER diagrams.</p>
</div>

<div id="theory">
<h2>Theory</h2> 

<h3>Data Models</h3>
<p>A data model is a description of the organization or structure of data in an information system. The structure of data can be observed at different levels of abstraction â€“ conceptual, logical and physical.</p>

<ol>
<li><b>Conceptual data model:</b> The manner in which human users view the overall structure of data is denoted as its conceptual model. Entity Relationship (ER) models and ontologies are examples of conceptual models.</li>

<li><b>Logical data model:</b> The way a database system constrains the overall structure of data (e.g. as relations or objects) is denoted as its logical data model. Examples include relational, object-oriented and object-relational models.</li>

<li><b>Physical data model:</b> The way data is actually stored on disk (in terms of cylinders and tracks) or in other storage media is denoted as its physical data model.</li>
</ol>

<h3>Entities, Relationships and Attributes</h3>

<p>An <b>entity</b> may be defined as a thing which is recognized as being capable of an independent existence and which can be uniquely identified. An entity is an abstraction from the complexities of some domain. When we speak of an entity we normally speak of some aspect of the real world which can be distinguished from other aspects of the real world.[3]</p>

<p>An entity may be a physical object such as a house or a car, an event such as a house sale or a car service, or a concept such as a customer transaction or order. Although the term entity is the one most commonly used, following Chen we should really distinguish between an entity and an entity-type. An entity-type is a category. An entity, strictly speaking, is an instance of a given entity-type. There are usually many instances of an entity-type. Because the term entity-type is somewhat cumbersome, most people tend to use the term entity as a synonym for this term. Entities can be thought of as nouns. Examples: a computer, an employee, a song, a mathematical theorem.</p>

<p>A <b>relationship</b> captures how two or more entities are related to one another. Relationships can be thought of as verbs, linking two or more nouns. Examples: an <i>owns</i> relationship between a company and a computer, a <i>supervises</i> relationship between an employee and a department, a <i>performs</i> relationship between an artist and a song, a <i>proved</i> relationship between a mathematician and a theorem.</p>

<p>Entities and relationships can both have <b>attributes</b>. Examples: an employee entity might have a Voter ID Number attribute; the <i>proved</i> relationship may have a <i>date</i> attribute.

Every entity (unless it is a weak entity) must have a minimal set of uniquely identifying attributes, which is called the entity's <b>primary key</b>.

Entity-relationship diagrams don't show single entities or single instances of relations. Rather, they show entity sets and relationship sets. Example: a particular song is an entity. The collection of all songs in a database is an entity set. The <i>eaten</i> relationship between a child and her lunch is a single relationship. The set of all such child-lunch relationships in a database is a relationship set. In other words, a relationship set corresponds to a relation in mathematics, while a relationship corresponds to a member of the relation.</p>

<h3>Conventions</h3>

<p>Entity sets are drawn as <i>rectangles</i>, relationship sets as <i>diamonds</i>. If an entity set participates in a relationship set, they are connected with a <i>line</i>.

Attributes are drawn as <i>ovals</i> and are connected with a <i>line</i> to exactly one entity or relationship set.

Cardinality constraints are expressed as follows:

<ol>
<li>A <i>double line</i> indicates a participation constraint, totality or surjectivity: all entities in the entity set must participate in at least one relationship in the relationship set;</li>

<li>An <i>arrow</i> from entity set to relationship set indicates a key constraint, i.e. injectivity: each entity of the entity set can participate in at most one relationship in the relationship set;</li>

<li>A <i>thick line</i> indicates both, i.e. bijectivity: each entity in the entity set is involved in exactly one relationship.</li>

<li>An <i>underlined</i> name of an attribute indicates that it is a key: two different entities or relationships with this attribute always have different values for this attribute.</li>

</ol>
</p>
</div>

<div id="objective">
<h2>Objective</h2> 

<p>Conceptual modelling is a very important phase in designing a sucessful database application. Entity-Relationship Model and its variations are frequently used for the conceptual design of database applications, and many more database design tools employ these concepts. The objective of this experiment is to practice constructing ER models and diagrams for different scenarios.</p> 
</div>


<div id="simulation">
<h2>Simulation</h2>

<p>Consider the following set of requirements for a company database:</p> 

<ul>              
<li>The company keeps track of each employees's name, age and identification number (ID). Employee identification number should have a unique value for each employee. The name and age together form the primary key of the employee.</li>

<li>Each department is described by the attributes name, location and phone number.</li>

<li>Each project has a project name and a project ID and the department to which under which it is assigned.</li>
</ul>

<h4>Constraints:</h4>
<ol>
<li><b>Employees</b> may be assigned to only 1 <b>department</b> at a time, each employee <i>must</i> be assigned to a particular department.
<li><b>Employees</b> may be assigned to <i>several</i> projects at once, each with an associated <b>%time</b>. 
<li><b>Employees</b> <i>need not</i> be assigned to any projects.
</ol>

<p>The example below shows the input for designing an ER schema for the company database. All the entity and relationship names are given and the attributes corresponding to each entity are shown as a list. The last element of the list indicates the key attributes of that entity. E.g. For the entity <i>employee</i>, the key attributes are (0,1), which means that Name and Age are the key attributes.</p>

{{{id=1|
#auto
%hideall
def showER():
    import re
    x=0
    y=0
    coord={}
    P=""
    cnt=0
    for i in Entities:
        ename = i;
        coord[ename]=[x,y]
        x1=x
        y1=y
        if cnt==0:
            P=line([(x-2,y-2), (x+2,y-2)]) + line([(x+2,y-2), (x+2,y+2)]) + line([(x+2,y+2), (x-2,y+2)]) + line([(x-2,y+2), (x-2,y-2)]) + text(ename, (x,y), axes=false)
            cnt=1
        else:
            P+=line([(x-2,y-2), (x+2,y-2)]) + line([(x+2,y-2), (x+2,y+2)]) + line([(x+2,y+2), (x-2,y+2)]) + line([(x-2,y+2), (x-2,y-2)]) + text(ename, (x,y), axes=false)
        attributes = Entities[i] 
        lc=0;
        for j in range(len(attributes)-1):
            attributes[j]=attributes[j].strip()
            if lc==0:
                x1=x-4
                y1=y-4
                P+=line([(x1,y1+1),(x-2,y-2)])
            if lc==1:
                x1=x+4
                y1=y-4
                P+=line([(x1,y1+1),(x+2,y-2)])
            if lc==2:
                x1=x+4
                y1=y+4
                P+=line([(x1,y1-1),(x+2,y+2)])
            if lc==3:
                x1=x-4
                y1=y+4
                P+=line([(x1,y1-1),(x-2,y+2)])
            lc+=1   
            P+=ellipse((x1,y1),2,1, axes=false) + text(attributes[j],(x1,y1))
        if x==0:
            x=20
        else:
            x=0
            y+=20
    #print coord
    for i in Relations:
        rname = i
        enames = Relations[i]
        x1,y1 = coord[enames[0]]
        x2,y2 = coord[enames[1]]
        xr=(x1 + x2)/2
        yr=(y1 + y2)/2
        #print enames,xr,yr # 10,10
        P+=line([(xr-2,yr),(xr,yr+2)]) + line([(xr,yr+2),(xr+2,yr)]) + line([(xr+2,yr),(xr,yr-2)]) + line([(xr,yr-2),(xr-2,yr)]) + text(rname,(xr,yr))
        if yr==y1:
            if xr>x1:
                P+=line([(xr-2,yr),(x1+2,yr)]) + line([(xr+2,yr),(x2-2,yr)])
            else:
                P+=line([(xr-2,yr),(x2+2,yr)]) + line([(xr+2,yr),(x1-2,yr)])
        else:
            if yr>y1:
                P+=line([(xr,yr-2),(x1,y1+2)]) + line([(xr,yr+2),(x2,y2-2)])
            else:
                P+=line([(xr,yr-2),(x2,y2+2)]) + line([(xr,yr+2),(x1,y1-2)])
    #P=line([(x,y), (5,5)]) + line([(0,0), (1,1)]) + line([(2,0), (1,1)]) + line([(2,0), (1,-1)]) + line([(0,0), (1,-1)]) + text(Name, (1,0), axes=false)+ arrow((2,0), (3,2))
    P.show(axes=false)
///
}}}

{{{id=2|

///
}}}

<h4>Generating the ER diagram</h4>

<p>The showER() at the end of the code above produces the output ER diagram. In case, there is no diagram visible above, you need to click on the code and press the 'Evaluate' button that appears below the code. If no such button appears when you click on the code, then you are not in 'Edit' mode. To enter 'Edit' mode click 'Edit a copy' (or 'Log in to edit a copy') link at the top-left of this page.</p>

<p><b>Creating a Login:</b> If you have not already created a login, then click on the 'Log in to edit a copy' link and then 'Sign up for a new Sage Notebook account'. Signing up is easy. Enter a username and any password that you would remember easily. Then come back to the login screen and login with your username/password. You will reach a page listing all your worksheets. Initially, this list will be empty. Click on the 'Published' link on the top-right corner, and you will see a list of published worksheets. Click on the 'Databases Virtual Lab' worksheet to return back to the databases virtual lab home page.</p>

<h4>Observe the ER diagram</h4>

<p>The description above says that each project has a department to which it is assigned. But, the Project entity does <i>not</i> contain a DeptID attribute. Instead, the department is identified using the relationship 'Done In'. This is a choice. Since the description says that each project is assigned to only 1 department, we can also identify the department by storing an attribute of DeptID for each project. If there is a possibility of more than 1 department for a project (e.g. multi-disciplinary projects), then it is better to use a relationship like above, instead of a DeptID attribute.</p>

<h4>Try Now!</h4>

<p>Copy-Paste the code above into the cells below and modify it to do the following. After you make each change, you can click on the 'evaluate' button below the cell to see the changes.</p>

<ul><li>Add the attribute 'ID' to Employee entity.</li></ul>

{{{id=4|

///
}}}

<ul><li>Create the relationship 'Works In' between employee and department.</li></ul>

{{{id=5|

///
}}}

<ul><li>Remove the Manager entity and add a boolean attribute to Employee called 'IsManager', which can take the values of True or False. Isn't this a better representation?</li></ul>

{{{id=6|

///
}}}

<p><b>Disclaimer:</b> This simulation tool is limited in some ways and only serves as an illustration for simple situations. In particular, attributes of relationships are not rendered. Also, if there are more than 4 attributes for each entity or more than 4 entities itself, the screen is likely to get cluttered.
<hr />

</div>

<div id="quizzes">
<h2>Quiz</h2> 

Consider the following set of requirements for a university database:

<ul>
<li>The university keeps track of each student's name, roll number, hostel room, phone, gender, joining year, degree, department, registered subjects and completed subjects. Roll number should have a unique value for each student.</li>
<li>Each department is described by a name, department code, office phone and college. Both name and code have unique value.</li>
<li>Each subject has a name, description, subject id, credits, level and offering departments. The value of subject id is unique for each subject.</li>
</ul>
Design an ER schema for this application and draw an ER diagram for that schema. Specify key attributes of each entity type and stuctural constraints on each relationship type. Note any unspecified requirements and make appropriate assumptions to make the specifications complete.
</li>
</ul>
</div>

{{{id=3|
Entities={
  

'Student':['name','rollno','hostel_room','phone','gebder','joining_year','degree','dept_code',
'registred_subject','completed_subject',(1)],

'Department':['name','dept_code','office_phone','college',(0,1)],

'Subject':['name','description','id','credit','level','dept_code',(2)],

}


Relations={
  'Registered':['Student','Department'],
  'Having':['Department','Subject'],
  'Takes':['Student','Subject'],
}
showER()
///
<html><font color='black'><img src='cell://sage0.png'></font></html>
}}}

{{{id=13|

///
Traceback (most recent call last):    'Department':['name','dept_code','office_phone','college',(0,1)],
  File "", line 1, in <module>
    
  File "/tmp/tmplZbhnj/___code___.py", line 22, in <module>
    exec compile(u'showER()' + '\n', '', 'single')
  File "", line 1, in <module>
    
NameError: name 'showER' is not defined
}}}

<div id="readings"> 
	<h2> Further-readings </h2> 
	<ol>	
		<li>
		<a href="http://en.wikipedia.org/wiki/Entity-relationship_model">http://en.wikipedia.org/wiki/Entity-relationship_model</a>
		</li>
		<li>
		<a href="http://www.cs.sfu.ca/CC/354/zaiane/material/notes/Chapter2/node1.html">http://www.cs.sfu.ca/CC/354/zaiane/material/notes/Chapter2/node1.html</a>
		</li> 
 		<li>
		â€œFundamentals of Database Systems" by Elmasri and Navathe. 
		</li> 
 		<li>
		<a href="http://www.databaseanswers.org/modelling_tools.htm">
		Data Modelling Tools
		</a> 
		</li>
	</ol>
</div>

<br /><br />
For providing <b>Feedback</b> please click <a href="http://virtual-labs.ac.in/feedback/?lab=cse07">here</a>.<br />

<br />
- Sponsored by MHRD: <a href="http://virtual-labs.ac.in/nmeict/" target="_blank">click</a>
- Licensing Terms: <a href="http://virtual-labs.ac.in/licensing/" target="_blank">click</a>

{{{id=12|

///
}}}